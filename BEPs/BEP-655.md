<pre>
  BEP: 655
  Title: Implement EIP-7934 RLP Execution Block Size Limit
  Status: Draft
  Type: Standards
  Created: 2026-01-20
  Description: Introduce a protocol-level cap on the maximum RLP-encoded block size to 10 MiB, including a 2 MiB margin for beacon block size
</pre>

# BEP-655: Implement EIP-7934 RLP Execution Block Size Limit

- [BEP-655: Implement EIP-7934 RLP Execution Block Size Limit](#bep-655-implement-eip-7934-rlp-execution-block-size-limit)
  - [1. Summary](#1-summary)
  - [2. Abstract](#2-abstract)
  - [3. Motivation](#3-motivation)
  - [4. Specification](#4-specification)
    - [Block Size Cap](#block-size-cap)
    - [Changes to Protocol Behavior](#changes-to-protocol-behavior)
    - [Protocol Adjustment](#protocol-adjustment)
  - [5. Rationale](#5-rationale)
    - [Why 10 MiB?](#why-10-mib)
  - [6. Backwards Compatibility](#6-backwards-compatibility)
  - [7. Security Considerations](#7-security-considerations)
  - [8. License](#8-license)

## 1. Summary

This BEP introduces a protocol-level cap on the maximum RLP-encoded execution block size to 8 MiB on BSC. The blob sidecar is not counted as part of the execution block size.

## 2. Abstract

This proposal introduces a protocol-level cap on the maximum RLP-encoded execution block size. The Ethereum community sets this limit to 10 megabytes (MiB), which includes a margin of 2 MiB to account for beacon block sizes. BSC adopts a limit of 8 MiB for the execution block size.

## 3. Motivation

Currently, BSC does not enforce a strict upper limit on the encoded size of blocks. This lack of constraint can result in:

1. **Network Instability**: Extremely large blocks slow down propagation and increase the risk of temporary forks and reorgs.
2. **DoS Risks**: Malicious actors could generate exceptionally large blocks to disrupt network performance.

Additionally, blocks exceeding 10 MiB are not propagated by the consensus layer's (CL) gossip protocol, potentially causing network fragmentation or denial-of-service (DoS) conditions.

By imposing a protocol-level limit on the RLP-encoded block size, BSC can ensure enhanced resilience against targeted attacks on block validation times. Adding an additional margin of 2MiB explicitly accommodates beacon block sizes, ensuring compatibility across network components.

## 4. Specification

### Block Size Cap

- Introduce constants:
  - `MAX_BLOCK_SIZE` set to **10 MiB (10,485,760 bytes)**
  - `SAFETY_MARGIN` set to **2MiB (2,097,152 bytes)**
  - `MAX_RLP_BLOCK_SIZE` calculated as `MAX_BLOCK_SIZE - MARGIN`
- Any RLP-encoded block exceeding `MAX_RLP_BLOCK_SIZE` must be considered invalid.

Thus add the following check to the protocol:

```python
MAX_BLOCK_SIZE = 10_485_760  # 10 MiB
SAFETY_MARGIN = 2_097_152  # 2 MiB
MAX_RLP_BLOCK_SIZE = MAX_BLOCK_SIZE - SAFETY_MARGIN

# if true, the block is invalid and should be rejected/not get built
def exceed_max_rlp_block_size(block: Block) -> bool:
    return len(rlp.encode(block)) > MAX_RLP_BLOCK_SIZE
```

### Changes to Protocol Behavior

1. **Block Creation**: Validators must ensure the total RLP-encoded size of any produced block does not exceed `MAX_RLP_BLOCK_SIZE`.
2. **Block Validation**: Nodes must reject blocks whose RLP-encoded size exceeds `MAX_RLP_BLOCK_SIZE`.

### Protocol Adjustment

- All BSC client implementations must integrate this size check as part of block validation and propagation.
- This limit applies independently of gas-related metrics.

## 5. Rationale

### Why 10 MiB?

A cap of 10 MiB aligns with the gossip protocol constraint in the consensus layer (CL). An additional 2MiB margin explicitly accounts for beacon block sizes, ensuring compatibility and consistent block propagation across the network. Blocks significantly larger than 10 MiB will not be broadcast by the CL, potentially leading to network fragmentation or denial-of-service scenarios.

## 6. Backwards Compatibility

This change is **not backward-compatible** with any blocks larger than the newly specified size limit. Validators and miners will need to ensure their block construction logic strictly respects this limit.

## 7. Security Considerations

Restricting maximum block size provides inherent protection against deliberate oversized-block attacks.

## 8. License

Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).
