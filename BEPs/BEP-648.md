<pre>
  BEP: 648
  Title: Enhanced Fast Finality via In-Memory Voting Pool
  Status: Draft
  Type: Standards
  Created: 2026-01-12
  Description: Enable faster finality by determining finality through in-memory vote pools, without waiting for votes to be included in block headers.
</pre>

# BEP-648: Enhanced Fast Finality via In-Memory Voting Pool

- [BEP-648: Enhanced Fast Finality via In-Memory Voting Pool](#bep-648-enhanced-fast-finality-via-in-memory-voting-pool)
	- [1. Summary](#1-summary)
	- [2. Abstract](#2-abstract)
	- [3. Motivation](#3-motivation)
	- [4. Specification](#4-specification)
	- [5. Security](#5-security)
	- [6. Backward Compatibility](#6-backward-compatibility)
	- [7. License](#7-license)

## 1. Summary

This BEP proposes an optimization to the Fast Finality mechanism introduced in [BEP-126](./BEP126.md), enabling nodes to collect attestations directly from in-memory vote pools rather than waiting for them to be packaged into block headers, thereby achieving faster finality determination.

## 2. Abstract

[BEP-126](./BEP126.md) introduced Fast Finality on BNB Smart Chain. Under the current design, a block is justified when its attestation appears in the next block's header, and finalized when both it and its direct child are justified. This requires at least 2 subsequent blocks.

This BEP extends the justification rule to allow nodes to determine justification directly from in-memory vote pools when ⅔+ validators' votes are received, without waiting for attestations to be included in block headers. This significantly reduces finality latency while maintaining all BEP-126 security guarantees.

Attestations continue to be included in block headers as per BEP-126, ensuring validator rewards and enabling on-chain consensus verification.

## 3. Motivation

Under BEP-126, finality determination is unnecessarily coupled to block production. Validators complete voting quickly, but finality cannot be determined until attestations are included in block headers. Once ⅔+ validators have voted, their votes already provide sufficient cryptographic proof—waiting for block inclusion introduces artificial delay.

This BEP decouples finality determination from block production by allowing nodes to determine finality directly from in-memory vote pools.

## 4. Specification

This BEP extends the Finality Rules from [BEP-126](./BEP126.md) Section 4.1.3.

There are two steps to finalize a block, the first step we call justify, the second step we call finalize.

1. A block is called justified if
* (1) it is the root, or
* (2) there exists attestation for this block ~~in its direct child's header~~, we call this block **justified**.
2. A block is called finalized if
* (1) it is the root, or
* (2) it is justified and its direct child is justified.

All other aspects of BEP-126 remain unchanged, including validator vote rules, aggregate vote rules, and the longest chain rule.

## 5. Security

This BEP does **not** alter the core safety assumptions or mechanisms of Fast Finality. It does not change validator vote rules, aggregate vote rules, finalization thresholds, or the longest chain rule.

The only modification is allowing nodes to determine justification from in-memory vote pools in addition to on-chain attestations. Both approaches rely on the same cryptographic foundation: ⅔+ valid validator votes. Since the underlying cryptographic proof is unchanged, all [BEP-126](./BEP126.md) safety guarantees—including accountable safety and plausible liveness—remain intact.

## 6. Backward Compatibility

This BEP is **fully backward compatible**. It does not change consensus rules, block validation, block headers, or vote aggregation.

Finality determination is a client-side optimization. Upgraded nodes observe faster finality via in-memory vote pools, while non-upgraded nodes continue using header-based finality. Network stability is unaffected.

This can be deployed as a client upgrade without requiring network-wide coordination or hard fork activation.

## 7. License

The content is licensed under [Creative Commons CC0 1.0 Universal License](https://creativecommons.org/publicdomain/zero/1.0/).

